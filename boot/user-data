#cloud-config

# Change to your locale
keyboard:
  layout: de
  variant: de
  options: ctrl:nocaps

# Enable pwauth for ssh
ssh_pwauth: true

users:
  - name: printalapi
    gecos: 'Masteruser Cups Printserver'
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo
    lock_passwd: false
    passwd: '$6$y85Kopt7KicyJb/B$YHa.NACkWd/m6Ps3bLGj82CwMHmFb/iEarkBRaRkNNbolj65pSn3hfurR2busThK1Jsi07/jTspyLiiQaCTAp1'
    ssh_authorized_keys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINu7NSzoROSCDrt/7C2zIW7k2YTo4H5nbQPI2PmsOFVo derek@t495"
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDJ3Bhb61iZo38+cghPjlIkusOLqVUIwbURCESyLL6Cdb7drN8+0l+5VlhuKH5NeeWQrgM8RwI02HWfCwOqGBuO86cG7uUl+Fi7PENtpKy8KGBOeEutFrQcgTRnjeQiZB2on1X+KItgO/sla46L0qH9aKzoB6NzuuVWnopqvqs+HK/RshLmXCBmGpPF2UqUJIO69IhcbvmwnZPgfvOGSFpY9/9nV/+ZaABiEerj1i9bjJvVoLfZTQ8oOH5IQdDE/qZorWNIzDaBLlkn0929273FE48Q/b8RIwdx6fV137Ysbq67SJtvyP4eCRjZk8ux/BqnktSGD/6uKC8KgtuFAfLd root@knx"

ntp:
  servers:
    - ntp.ubuntu.com

package_update: true
package_upgrade: true

packages:
  - cups 
  - avahi-daemon 
  - libnss-mdns 
  - printer-driver-all 
  - cups-bsd cups-client 
  - zram-tools 
  - sysstat 
  - lsof 
  - python3 
  - python3-pip 
  - python3-flask

write_files:
  - path: /etc/default/zramswap
    content: |
      ALGO=lz4
      PERCENT=25
      PRIORITY=100
    permissions: '0644'
    owner: root:root
  - path:  /etc/modprobe.d/zram.conf
    content: options zram num_devices=3 
    owner: root:root
    permissions: '0755'

runcmd:
  - ["/usr/bin/systemctl", "enable, "ssh"] 
  
  - ["/bin/touch","ssh"] 
  - ["/boot/firmware/firstrun.sh"]

